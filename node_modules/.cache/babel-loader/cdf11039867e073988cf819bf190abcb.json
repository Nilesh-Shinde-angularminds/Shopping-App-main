{"ast":null,"code":"var _jsxFileName = \"/home/am-pc-63/NHS/React/Shopping-App-main/src/Components/Home.js\",\n    _s = $RefreshSig$();\n\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getAllProducts, setDataFromApi, setCount } from \"./HomeSlice\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    dataFromApi,\n    count\n  } = useSelector(state => state.HomeData);\n  const {\n    currentPage,\n    itemsPerPage\n  } = useSelector(state => state.PaginationData);\n  const [selectedData, setSelectedData] = useState(null);\n  useEffect(() => {\n    dispatch(getAllProducts());\n  }, []);\n  let [localData, setLocalData] = useState(JSON.parse(localStorage.getItem(\"mainObj\")) ? JSON.parse(localStorage.getItem(\"mainObj\")) : []);\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\")); // localData.push(selectedData)\n\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n      dispatch(setCount(JSON.parse(localStorage.getItem(\"mainObj\")).length));\n    }\n  }, [selectedData]);\n  const [sort, setSort] = useState(\"\"); // ****add to cart\n\n  function AddTOCart(id, name, image, price) {\n    let count = localData.filter(itm => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map(itms => itms.id == id ? { ...itms,\n          quntity: itms.quntity + 1\n        } : itms);\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1\n        });\n      }\n    }\n\n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1\n      });\n    }\n  } // ****Sorting\n\n\n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n    let data = [...dataFromApi];\n\n    if (sort == \"H\") {\n      dispatch(setDataFromApi(data.sort((a, b) => {\n        return b.price - a.price;\n      })));\n      setSort(\"h\");\n    }\n\n    if (sort == \"L\") {\n      dispatch(setDataFromApi(data.sort((a, b) => {\n        return a.price - b.price;\n      })));\n      setSort(\"l\");\n    }\n\n    if (sort == \"D\") {\n      dispatch(getAllProducts());\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(NaveBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"margin: 25px 0\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"control-label\",\n              children: \"Sort by:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => {\n                Sorting(e);\n              },\n              name: \"\",\n              id: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"D\",\n                children: \"Default\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"H\",\n                children: \"High to Low\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"L\",\n                children: \"Low to High\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), Array.from({\n        length: Math.ceil(dataFromApi.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage).length / 4)\n      }, (_, index) => index).map((productNo, i2) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: dataFromApi.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage).map((itms, i) => {\n              if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: i % 4 === 0 ? \"bg-info\" : i % 4 === 1 ? \"bg-warning\" : i % 4 === 2 ? \"bg-danger\" : \"bg-success\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `http://interviewapi.ngminds.com/${itms.image}`,\n                      width: \"100\",\n                      height: \"200\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: itms.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fa fa-inr\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 31\n                      }, this), itms.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      onClick: () => AddTOCart(itms._id, itms.name, itms.image, itms.price),\n                      className: \"btn btn-warning\",\n                      children: \"Add to Cart\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 27\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 25\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)]\n        }, i2, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(Pagination, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Home, \"V7NzoFrADUQx4ykDHxOxlqOHsX8=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/am-pc-63/NHS/React/Shopping-App-main/src/Components/Home.js"],"names":["Redirect","useHistory","React","useCallback","useEffect","useMemo","useState","Link","NaveBar","Pagination","useSelector","useDispatch","getAllProducts","setDataFromApi","setCount","axios","Home","dispatch","dataFromApi","count","state","HomeData","currentPage","itemsPerPage","PaginationData","selectedData","setSelectedData","localData","setLocalData","JSON","parse","localStorage","getItem","push","setItem","stringify","length","sort","setSort","AddTOCart","id","name","image","price","filter","itm","data","myData","map","itms","quntity","Sorting","e","preventDefault","target","value","a","b","margin","Array","from","Math","ceil","slice","_","index","productNo","i2","i","_id"],"mappings":"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","sourcesContent":["import { Redirect, useHistory } from \"react-router-dom\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getAllProducts, setDataFromApi, setCount } from \"./HomeSlice\";\nimport axios from \"axios\";\n\nexport default function Home() {\n  const dispatch = useDispatch();\n  const { dataFromApi, count } = useSelector((state) => state.HomeData);\n  const { currentPage, itemsPerPage } = useSelector(\n    (state) => state.PaginationData\n  );\n  const [selectedData, setSelectedData] = useState(null);\n\n  useEffect(() => {\n    dispatch(getAllProducts());\n  }, []);\n\n  let [localData, setLocalData] = useState(\n    JSON.parse(localStorage.getItem(\"mainObj\"))\n      ? JSON.parse(localStorage.getItem(\"mainObj\"))\n      : []\n  );\n\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n      // localData.push(selectedData)\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n      dispatch(setCount(JSON.parse(localStorage.getItem(\"mainObj\")).length));\n    }\n  }, [selectedData]);\n\n  const [sort, setSort] = useState(\"\");\n\n  // ****add to cart\n  function AddTOCart(id, name, image, price) {\n    let count = localData.filter((itm) => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map((itms) =>\n          itms.id == id ? { ...itms, quntity: itms.quntity + 1 } : itms\n        );\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1,\n        });\n      }\n    }\n\n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1,\n      });\n    }\n  }\n\n  // ****Sorting\n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n    let data = [...dataFromApi];\n\n    if (sort == \"H\") {\n      dispatch(\n        setDataFromApi(\n          data.sort((a, b) => {\n            return b.price - a.price;\n          })\n        )\n      );\n\n      setSort(\"h\");\n    }\n    if (sort == \"L\") {\n      dispatch(\n        setDataFromApi(\n          data.sort((a, b) => {\n            return a.price - b.price;\n          })\n        )\n      );\n      setSort(\"l\");\n    }\n    if (sort == \"D\") {\n      dispatch(getAllProducts());\n    }\n  }\n\n  return (\n    <>\n      <div className=\"container\">\n        <NaveBar />\n        <hr />\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <div style={{ margin: \"margin: 25px 0\" }}>\n              <label className=\"control-label\">Sort by:</label>\n              <select\n                onChange={(e) => {\n                  Sorting(e);\n                }}\n                name=\"\"\n                id=\"\"\n              >\n                <option value=\"D\">Default</option>\n                <option value=\"H\">High to Low</option>\n                <option value=\"L\">Low to High</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        {/* <div className=\"row\"> */}\n        {Array.from(\n          {\n            length: Math.ceil(\n              dataFromApi.slice(\n                (currentPage - 1) * itemsPerPage,\n                currentPage * itemsPerPage\n              ).length / 4\n            ),\n          },\n          (_, index) => index\n        ).map((productNo, i2) => {\n          return (\n            <div key={i2}>\n              <div className=\"row\">\n                {dataFromApi\n                  .slice(\n                    (currentPage - 1) * itemsPerPage,\n                    currentPage * itemsPerPage\n                  )\n                  .map((itms, i) => {\n                    if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                      return (\n                        <div key={i} className=\"col-md-3\">\n                          <div\n                            className={\n                              i % 4 === 0\n                                ? \"bg-info\"\n                                : i % 4 === 1\n                                ? \"bg-warning\"\n                                : i % 4 === 2\n                                ? \"bg-danger\"\n                                : \"bg-success\"\n                            }\n                          >\n                            <img\n                              src={`http://interviewapi.ngminds.com/${itms.image}`}\n                              width=\"100\"\n                              height=\"200\"\n                            />\n                            <br />\n                            <p>{itms.name}</p>\n                            <p>\n                              <i className=\"fa fa-inr\"></i>\n                              {itms.price}\n                            </p>\n\n                            <a\n                              onClick={() =>\n                                AddTOCart(\n                                  itms._id,\n                                  itms.name,\n                                  itms.image,\n                                  itms.price\n                                )\n                              }\n                              className=\"btn btn-warning\"\n                            >\n                              Add to Cart\n                            </a>\n                          </div>\n                        </div>\n                      );\n                    }\n                  })}\n              </div>\n              <hr />\n            </div>\n          );\n        })}\n        <Pagination />\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}