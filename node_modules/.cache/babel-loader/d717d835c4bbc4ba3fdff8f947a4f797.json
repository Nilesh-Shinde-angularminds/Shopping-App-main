{"ast":null,"code":"var _jsxFileName = \"/home/am-pc-63/Downloads/Shopping-App-main/src/Components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getAllProducts, setDataFromApi, setCount } from \"./HomeSlice\"; // import {Redirect} from \"react-router-dom\n//http://assignment.ngminds.com/shopping.pdf\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  // const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    dataFromApi,\n    count\n  } = useSelector(state => state.HomeData);\n  const {\n    currentPage,\n    itemsPerPage\n  } = useSelector(state => state.PaginationData); // const [dataFromApi, setDataFromApi] = useState([]);\n\n  const [selectedData, setSelectedData] = useState(null); // let  [count, setCount] = useState(0);\n  // const [currentPage, setCurrentPage] = useState(0);  //*\n  // const [itemsPerPage, setItemsPerPage] = useState(5); //*\n\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(5);\n  const [AllDataLength, setAllDataLength] = useState(); // setLastPageIndex( Math.ceil(response.data.products.length/itemsPerPage))}\n\n  useEffect(() => {\n    getAllProducts();\n  }, []);\n  console.log(dataFromApi); // const fetch2 = useEffect(() => {\n  //   fetch();\n  //   return dispatch(setDataFromApi([]));\n  // }, [start, end]);\n  // function fetch() {\n  //   axios\n  //     .get(\"http://interviewapi.ngminds.com/api/getAllProducts\")\n  //     .then((response) => {\n  //       dispatch(setDataFromApi(response.data.products.slice(start, end)));\n  //       setAllDataLength(Math.ceil(response.data.products.length));\n  //     });\n  // }\n  // useEffect(() => {\n  //   setStart(itemsPerPage * currentPage);\n  //   setEnd(itemsPerPage * currentPage + itemsPerPage);\n  // }, [itemsPerPage, currentPage]);\n\n  let [localData, setLocalData] = useState(JSON.parse(localStorage.getItem(\"mainObj\")) ? JSON.parse(localStorage.getItem(\"mainObj\")) : []);\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\")); // localData.push(selectedData)\n\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n      dispatch(setCount(JSON.stringify(JSON.parse(localStorage.getItem(\"mainObj\")).length)));\n    }\n  }, [selectedData]);\n  const [sort, setSort] = useState(\"\"); // ****add to cart \n\n  function AddTOCart(id, name, image, price) {\n    let count = localData.filter(itm => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map(itms => itms.id == id ? { ...itms,\n          quntity: itms.quntity + 1\n        } : itms);\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1\n        });\n      }\n    }\n\n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1\n      });\n    }\n  } // ****Sorting\n\n\n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n    let data = [...dataFromApi];\n\n    if (sort == \"H\") {\n      dispatch(setDataFromApi(data.sort((a, b) => {\n        return b.price - a.price;\n      })));\n      setSort(\"h\");\n    }\n\n    if (sort == \"L\") {\n      dispatch(setDataFromApi(data.sort((a, b) => {\n        return a.price - b.price;\n      })));\n      setSort(\"l\");\n    }\n\n    if (sort == \"D\") {\n      dispatch(getAllProducts());\n    }\n  } //  const [displayData ,setDisplayData]=useState(\"hello\")\n  // useEffect(()=>{\n  //    const displayDatas=\n  //     // if(displayData!==displayDatas)\n  //     // {\n  //       setDisplayData(displayDatas)\n  //       return(displayDatas)\n  //     // }\n  //   },[dataFromApi,sort])\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(NaveBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"margin: 25px 0\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"control-label\",\n              children: \"Sort by:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => {\n                Sorting(e);\n              },\n              name: \"\",\n              id: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"D\",\n                children: \"Default\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"H\",\n                children: \"High to Low\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"L\",\n                children: \"Low to High\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), Array.from({\n        length: Math.ceil(dataFromApi.length / 4)\n      }, (_, index) => index).map((productNo, i2) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: dataFromApi.map((itms, i) => {\n              if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: i % 4 === 0 ? \"bg-info\" : i % 4 === 1 ? \"bg-warning\" : i % 4 === 2 ? \"bg-danger\" : \"bg-success\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `http://interviewapi.ngminds.com/${itms.image}`,\n                      width: \"100\",\n                      height: \"200\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: itms.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fa fa-inr\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 216,\n                        columnNumber: 31\n                      }, this), itms.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      onClick: () => AddTOCart(itms._id, itms.name, itms.image, itms.price),\n                      className: \"btn btn-warning\",\n                      children: \"Add to Cart\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 27\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 25\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this)]\n        }, i2, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Home, \"QeUOkbLfV5WbRvzQ9a6ts661rME=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/am-pc-63/Downloads/Shopping-App-main/src/Components/Home.js"],"names":["React","useCallback","useEffect","useMemo","useState","Redirect","useHistory","axios","Link","NaveBar","Pagination","useSelector","useDispatch","getAllProducts","setDataFromApi","setCount","Home","dispatch","dataFromApi","count","state","HomeData","currentPage","itemsPerPage","PaginationData","selectedData","setSelectedData","start","setStart","end","setEnd","AllDataLength","setAllDataLength","console","log","localData","setLocalData","JSON","parse","localStorage","getItem","push","setItem","stringify","length","sort","setSort","AddTOCart","id","name","image","price","filter","itm","data","myData","map","itms","quntity","Sorting","e","preventDefault","target","value","a","b","margin","Array","from","Math","ceil","_","index","productNo","i2","i","_id"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getAllProducts, setDataFromApi, setCount } from \"./HomeSlice\";\n// import {Redirect} from \"react-router-dom\n//http://assignment.ngminds.com/shopping.pdf\n\nexport default function Home() {\n  // const history = useHistory();\n  const dispatch = useDispatch()\n  const { dataFromApi, count } = useSelector((state) => state.HomeData);\n  const {currentPage , itemsPerPage } = useSelector((state)=> state.PaginationData)\n  // const [dataFromApi, setDataFromApi] = useState([]);\n  const [selectedData, setSelectedData] = useState(null);\n  // let  [count, setCount] = useState(0);\n  // const [currentPage, setCurrentPage] = useState(0);  //*\n  // const [itemsPerPage, setItemsPerPage] = useState(5); //*\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(5);\n\n  const [AllDataLength, setAllDataLength] = useState(); // setLastPageIndex( Math.ceil(response.data.products.length/itemsPerPage))}\n\n  useEffect(() => {\n    getAllProducts()\n  },[])\n  console.log(dataFromApi)\n  // const fetch2 = useEffect(() => {\n  //   fetch();\n  //   return dispatch(setDataFromApi([]));\n  // }, [start, end]);\n\n  // function fetch() {\n  //   axios\n  //     .get(\"http://interviewapi.ngminds.com/api/getAllProducts\")\n  //     .then((response) => {\n  //       dispatch(setDataFromApi(response.data.products.slice(start, end)));\n  //       setAllDataLength(Math.ceil(response.data.products.length));\n  //     });\n  // }\n\n\n  // useEffect(() => {\n  //   setStart(itemsPerPage * currentPage);\n  //   setEnd(itemsPerPage * currentPage + itemsPerPage);\n  // }, [itemsPerPage, currentPage]);\n\n\n\n  let [localData, setLocalData] = useState(\n    JSON.parse(localStorage.getItem(\"mainObj\"))\n      ? JSON.parse(localStorage.getItem(\"mainObj\"))\n      : []\n  );\n\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n      // localData.push(selectedData)\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n     dispatch(\n       setCount(\n         JSON.stringify(JSON.parse(localStorage.getItem(\"mainObj\")).length)\n       )\n     );\n    }\n  }, [selectedData]);\n\n  const [sort, setSort] = useState(\"\");\n\n// ****add to cart \n  function AddTOCart(id, name, image, price) {\n  \n    let count = localData.filter((itm) => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n    \n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map((itms) =>\n          itms.id == id ? { ...itms, quntity: itms.quntity + 1 } : itms\n        );\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1,\n        });\n      }\n    }\n  \n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1,\n      });\n    }\n  }\n\n  // ****Sorting\n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n    let data= [...dataFromApi ]\n\n    if (sort == \"H\") {\n      dispatch(setDataFromApi ( data.sort((a, b) => {\n        return b.price - a.price;\n      })))\n      \n      setSort(\"h\");\n    }\n    if (sort == \"L\") {\n      dispatch(setDataFromApi(data.sort((a, b) => {\n        return a.price - b.price;\n      })))\n      setSort(\"l\");\n    }\n    if (sort == \"D\") {\n\n          dispatch(getAllProducts())\n    }\n  }\n\n  //  const [displayData ,setDisplayData]=useState(\"hello\")\n  // useEffect(()=>{\n  //    const displayDatas=\n  //     // if(displayData!==displayDatas)\n  //     // {\n  //       setDisplayData(displayDatas)\n  //       return(displayDatas)\n  //     // }\n  //   },[dataFromApi,sort])\n\n  return (\n    <>\n      <div className=\"container\">\n        <NaveBar />\n        <hr />\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <div style={{ margin: \"margin: 25px 0\" }}>\n              <label  className=\"control-label\">\n                Sort by:\n              </label>\n              <select\n                onChange={(e) => {\n                  Sorting(e);\n                }}\n                name=\"\"\n                id=\"\"\n              >\n                <option value=\"D\">Default</option>\n                <option value=\"H\">High to Low</option>\n                <option value=\"L\">Low to High</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        {/* <div className=\"row\"> */}\n        {\n\n          Array.from({ length: Math.ceil(dataFromApi.length / 4) }, (_, index) => index).map((productNo,i2) => {\n            return (\n              <div  key={i2}>\n                <div className=\"row\">\n                  {dataFromApi.map((itms, i) => {\n                    if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                      return (\n                        <div key={i} className=\"col-md-3\">\n                          <div \n                            className={\n                              i % 4 === 0 ?\n                                \"bg-info\" :\n                                i % 4 === 1 ?\n                                  \"bg-warning\" :\n                                  i % 4 === 2 ?\n                                    \"bg-danger\" :\n                                    \"bg-success\"\n                            }\n                          >\n                            <img\n                              src={`http://interviewapi.ngminds.com/${itms.image}`}\n                              width=\"100\"\n                              height=\"200\"\n                            />\n                            <br />\n                            <p>{itms.name}</p>\n                            <p>\n                              <i className=\"fa fa-inr\"></i>\n                              {itms.price}\n                            </p>\n\n                            <a\n                              onClick={() =>\n                                AddTOCart(\n                                  itms._id,\n                                  itms.name,\n                                  itms.image,\n                                  itms.price\n                                )\n                              }\n                              className=\"btn btn-warning\"\n                            >\n                              Add to Cart\n                            </a>\n                          </div>\n                        </div>\n                      );\n                    }\n                  })}\n                </div>\n                <hr />\n              </div>\n            )\n          })\n\n        }\n     \n        {/* <Pagination\n          AllDataLength={AllDataLength}\n          data={dataFromApi}\n          // setItemsPerPage={setItemsPerPage}\n          // setCurrentPage={setCurrentPage}\n        /> */}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}