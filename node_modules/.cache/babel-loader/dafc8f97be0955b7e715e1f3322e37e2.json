{"ast":null,"code":"var _jsxFileName = \"/home/am-pc-63/Downloads/Shopping-App-main/src/Components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setDataFromApi } from \"./HomeSlice\"; // import {Redirect} from \"react-router-dom\n//http://assignment.ngminds.com/shopping.pdf\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  // const history = useHistory();\n  const dispatch = useDispatch();\n  const dataFromApi = useSelector(state => state.HomeData.allProducts); // const [dataFromApi, setDataFromApi] = useState([]);\n\n  const [selectedData, setSelectedData] = useState(null);\n  let [count, setCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(5);\n  const [AllDataLength, setAllDataLength] = useState(); // setLastPageIndex( Math.ceil(response.data.products.length/itemsPerPage))}\n\n  const fetch2 = useEffect(() => {\n    fetch();\n    return dispatch(setDataFromApi([]));\n  }, [start, end]);\n\n  function fetch() {\n    axios.get(\"http://interviewapi.ngminds.com/api/getAllProducts\").then(response => {\n      dispatch(setDataFromApi(response.data.products.slice(start, end)));\n      setAllDataLength(Math.ceil(response.data.products.length));\n    });\n  }\n\n  useEffect(() => {\n    setStart(itemsPerPage * currentPage);\n    setEnd(itemsPerPage * currentPage + itemsPerPage);\n  }, [itemsPerPage, currentPage]);\n  let [localData, setLocalData] = useState(JSON.parse(localStorage.getItem(\"mainObj\")) ? JSON.parse(localStorage.getItem(\"mainObj\")) : []);\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\")); // localData.push(selectedData)\n\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n      setCount(JSON.stringify(JSON.parse(localStorage.getItem(\"mainObj\")).length));\n    }\n  }, [selectedData]);\n  const [sort, setSort] = useState(\"\");\n\n  function AddTOCart(id, name, image, price) {\n    let count = localData.filter(itm => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map(itms => itms.id == id ? { ...itms,\n          quntity: itms.quntity + 1\n        } : itms);\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1\n        });\n      }\n    }\n\n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1\n      });\n    }\n  }\n\n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n\n    if (sort == \"H\") {\n      dispatch(setDataFromApi());\n      setSort(\"h\");\n    }\n\n    if (sort == \"L\") {\n      const sort2 = dataFromApi.sort((a, b) => {\n        return a.price - b.price;\n      });\n      setSort(\"l\");\n    }\n\n    if (sort == \"D\") {\n      axios.get(\"http://interviewapi.ngminds.com/api/getAllProducts\").then(response => dispatch(setDataFromApi(response.data.products.slice(start, end))));\n    }\n  } //  const [displayData ,setDisplayData]=useState(\"hello\")\n  // useEffect(()=>{\n  //    const displayDatas=\n  //     // if(displayData!==displayDatas)\n  //     // {\n  //       setDisplayData(displayDatas)\n  //       return(displayDatas)\n  //     // }\n  //   },[dataFromApi,sort])\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(NaveBar, {\n        count: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"margin: 25px 0\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"control-label\",\n              children: \"Sort by:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => {\n                Sorting(e);\n              },\n              name: \"\",\n              id: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"D\",\n                children: \"Default\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"H\",\n                children: \"High to Low\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"L\",\n                children: \"Low to High\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), Array.from({\n        length: Math.ceil(dataFromApi.length / 4)\n      }, (_, index) => index).map((productNo, i2) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: dataFromApi.map((itms, i) => {\n              if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: i % 4 === 0 ? \"bg-info\" : i % 4 === 1 ? \"bg-warning\" : i % 4 === 2 ? \"bg-danger\" : \"bg-success\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `http://interviewapi.ngminds.com/${itms.image}`,\n                      width: \"100\",\n                      height: \"200\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: itms.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fa fa-inr\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 31\n                      }, this), itms.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      onClick: () => AddTOCart(itms._id, itms.name, itms.image, itms.price),\n                      className: \"btn btn-warning\",\n                      children: \"Add to Cart\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 27\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 25\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this)]\n        }, i2, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(Pagination, {\n        AllDataLength: AllDataLength,\n        data: dataFromApi,\n        setItemsPerPage: setItemsPerPage,\n        setCurrentPage: setCurrentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Home, \"u6qSIl2gfGrkroIslr7Sv8UHyag=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/am-pc-63/Downloads/Shopping-App-main/src/Components/Home.js"],"names":["React","useCallback","useEffect","useMemo","useState","Redirect","useHistory","axios","Link","NaveBar","Pagination","useSelector","useDispatch","setDataFromApi","Home","dispatch","dataFromApi","state","HomeData","allProducts","selectedData","setSelectedData","count","setCount","currentPage","setCurrentPage","itemsPerPage","setItemsPerPage","start","setStart","end","setEnd","AllDataLength","setAllDataLength","fetch2","fetch","get","then","response","data","products","slice","Math","ceil","length","localData","setLocalData","JSON","parse","localStorage","getItem","push","setItem","stringify","sort","setSort","AddTOCart","id","name","image","price","filter","itm","myData","map","itms","quntity","Sorting","e","preventDefault","target","value","sort2","a","b","margin","Array","from","_","index","productNo","i2","i","_id"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport NaveBar from \"./NaveBar\";\nimport Pagination from \"./Pagination\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setDataFromApi } from \"./HomeSlice\";\n// import {Redirect} from \"react-router-dom\n//http://assignment.ngminds.com/shopping.pdf\n\nexport default function Home() {\n  // const history = useHistory();\n  const dispatch = useDispatch()\n  const dataFromApi = useSelector((state) => state.HomeData.allProducts);\n  // const [dataFromApi, setDataFromApi] = useState([]);\n  const [selectedData, setSelectedData] = useState(null);\n  let  [count, setCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(5);\n\n  const [AllDataLength, setAllDataLength] = useState(); // setLastPageIndex( Math.ceil(response.data.products.length/itemsPerPage))}\n\n  const fetch2 = useEffect(() => {\n    fetch();\n    return dispatch(setDataFromApi([]));\n  }, [start, end]);\n\n  function fetch() {\n    axios\n      .get(\"http://interviewapi.ngminds.com/api/getAllProducts\")\n      .then((response) => {\n        dispatch(setDataFromApi(response.data.products.slice(start, end)));\n        setAllDataLength(Math.ceil(response.data.products.length));\n      });\n  }\n\n\n  useEffect(() => {\n    setStart(itemsPerPage * currentPage);\n    setEnd(itemsPerPage * currentPage + itemsPerPage);\n  }, [itemsPerPage, currentPage]);\n\n\n\n  let [localData, setLocalData] = useState(\n    JSON.parse(localStorage.getItem(\"mainObj\"))\n      ? JSON.parse(localStorage.getItem(\"mainObj\"))\n      : []\n  );\n\n  useEffect(() => {\n    if (selectedData !== null) {\n      localData.push(selectedData);\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n    }\n    if (localStorage.getItem(\"mainObj\")) {\n      localData = JSON.parse(localStorage.getItem(\"mainObj\"));\n\n      // localData.push(selectedData)\n      localStorage.setItem(\"mainObj\", JSON.stringify(localData));\n      localStorage.setItem(\"main2\", JSON.stringify(localData));\n    }\n  }, [selectedData]);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"mainObj\")) {\n      setCount(\n        JSON.stringify(JSON.parse(localStorage.getItem(\"mainObj\")).length)\n      );\n    }\n  }, [selectedData]);\n\n  const [sort, setSort] = useState(\"\");\n\n  function AddTOCart(id, name, image, price) {\n  \n    let count = localData.filter((itm) => itm.id == id);\n    let data = JSON.parse(localStorage.getItem(\"mainObj\"));\n    \n    if (data) {\n      // localData.map((itms)=>{\n      //   if(itms.id==id){count++ }})\n\n      if (count.length > 0) {\n        let myData = JSON.parse(localStorage.getItem(\"mainObj\"));\n        const data = myData.map((itms) =>\n          itms.id == id ? { ...itms, quntity: itms.quntity + 1 } : itms\n        );\n        localStorage.setItem(\"mainObj\", JSON.stringify(data));\n        setLocalData(data);\n      }\n      if (count.length == 0) {\n        setSelectedData({\n          id: id,\n          name: name,\n          image: image,\n          price: price,\n          quntity: 1,\n        });\n      }\n    }\n  \n    if (!data) {\n      setSelectedData({\n        id: id,\n        name: name,\n        image: image,\n        price: price,\n        quntity: 1,\n      });\n    }\n  }\n\n  \n  function Sorting(e) {\n    e.preventDefault();\n    const sort = e.target.value;\n\n    if (sort == \"H\") {\n      dispatch(setDataFromApi ())\n      setSort(\"h\");\n    }\n    if (sort == \"L\") {\n      const sort2 = dataFromApi.sort((a, b) => {\n        return a.price - b.price;\n      });\n      setSort(\"l\");\n    }\n    if (sort == \"D\") {\n      axios\n        .get(\"http://interviewapi.ngminds.com/api/getAllProducts\")\n        .then((response) =>\n          dispatch(setDataFromApi(response.data.products.slice(start, end)))\n        );\n    }\n  }\n\n  //  const [displayData ,setDisplayData]=useState(\"hello\")\n  // useEffect(()=>{\n  //    const displayDatas=\n  //     // if(displayData!==displayDatas)\n  //     // {\n  //       setDisplayData(displayDatas)\n  //       return(displayDatas)\n  //     // }\n  //   },[dataFromApi,sort])\n\n  return (\n    <>\n      <div className=\"container\">\n        <NaveBar count={count} />\n        <hr />\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <div style={{ margin: \"margin: 25px 0\" }}>\n              <label  className=\"control-label\">\n                Sort by:\n              </label>\n              <select\n                onChange={(e) => {\n                  Sorting(e);\n                }}\n                name=\"\"\n                id=\"\"\n              >\n                <option value=\"D\">Default</option>\n                <option value=\"H\">High to Low</option>\n                <option value=\"L\">Low to High</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        {/* <div className=\"row\"> */}\n        {\n\n          Array.from({ length: Math.ceil(dataFromApi.length / 4) }, (_, index) => index).map((productNo,i2) => {\n            return (\n              <div  key={i2}>\n                <div className=\"row\">\n                  {dataFromApi.map((itms, i) => {\n                    if (productNo * 4 <= i && i < productNo * 4 + 4) {\n                      return (\n                        <div key={i} className=\"col-md-3\">\n                          <div \n                            className={\n                              i % 4 === 0 ?\n                                \"bg-info\" :\n                                i % 4 === 1 ?\n                                  \"bg-warning\" :\n                                  i % 4 === 2 ?\n                                    \"bg-danger\" :\n                                    \"bg-success\"\n                            }\n                          >\n                            <img\n                              src={`http://interviewapi.ngminds.com/${itms.image}`}\n                              width=\"100\"\n                              height=\"200\"\n                            />\n                            <br />\n                            <p>{itms.name}</p>\n                            <p>\n                              <i className=\"fa fa-inr\"></i>\n                              {itms.price}\n                            </p>\n\n                            <a\n                              onClick={() =>\n                                AddTOCart(\n                                  itms._id,\n                                  itms.name,\n                                  itms.image,\n                                  itms.price\n                                )\n                              }\n                              className=\"btn btn-warning\"\n                            >\n                              Add to Cart\n                            </a>\n                          </div>\n                        </div>\n                      );\n                    }\n                  })}\n                </div>\n                <hr />\n              </div>\n            )\n          })\n\n        }\n     \n        <Pagination\n          AllDataLength={AllDataLength}\n          data={dataFromApi}\n          setItemsPerPage={setItemsPerPage}\n          setCurrentPage={setCurrentPage}\n        />\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}